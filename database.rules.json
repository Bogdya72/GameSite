{
  "rules": {
    ".read": false,
    ".write": false,
    "zombiesurge_rooms_v1": {
      "$roomId": {
        ".read": "auth != null",
        ".write": false,
        "roomId": {
          ".write": "auth != null && !data.exists() && newData.parent().child('host/uid').val() == auth.uid && newData.val() == $roomId"
        },
        "createdAt": {
          ".write": "auth != null && !data.exists() && newData.parent().child('host/uid').val() == auth.uid"
        },
        "updatedAt": {
          ".write": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || root.child('zombiesurge_rooms_v1/'+$roomId+'/guest/uid').val() == auth.uid || newData.parent().child('host/uid').val() == auth.uid || newData.parent().child('guest/uid').val() == auth.uid)"
        },
        "endedAt": {
          ".write": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || root.child('zombiesurge_rooms_v1/'+$roomId+'/guest/uid').val() == auth.uid || newData.parent().child('host/uid').val() == auth.uid || newData.parent().child('guest/uid').val() == auth.uid)"
        },
        "status": {
          ".write": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || root.child('zombiesurge_rooms_v1/'+$roomId+'/guest/uid').val() == auth.uid || newData.parent().child('host/uid').val() == auth.uid || newData.parent().child('guest/uid').val() == auth.uid)",
          ".validate": "newData.isString() && (newData.val() == 'waiting' || newData.val() == 'running' || newData.val() == 'ended')"
        },
        "endedReason": {
          ".write": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || root.child('zombiesurge_rooms_v1/'+$roomId+'/guest/uid').val() == auth.uid || newData.parent().child('host/uid').val() == auth.uid || newData.parent().child('guest/uid').val() == auth.uid)"
        },
        "sharedWave": {
          ".write": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || newData.parent().child('host/uid').val() == auth.uid)"
        },
        "host": {
          ".write": "auth != null && ((data.exists() && data.child('uid').val() == auth.uid) || (!data.exists() && newData.child('uid').val() == auth.uid))"
        },
        "guest": {
          ".write": "auth != null && ((data.exists() && data.child('uid').val() == auth.uid) || (!data.exists() && newData.child('uid').val() == auth.uid))"
        }
      }
    },
    "zombiesurge_world_v1": {
      "$roomId": {
        ".read": "auth != null && (root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid || root.child('zombiesurge_rooms_v1/'+$roomId+'/guest/uid').val() == auth.uid)",
        ".write": "auth != null && root.child('zombiesurge_rooms_v1/'+$roomId+'/host/uid').val() == auth.uid"
      }
    }
  }
}
